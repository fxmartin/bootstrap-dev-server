# Technology Stack

**Analysis Date:** 2026-01-15

## Languages

**Primary:**
- Bash/Shell - All bootstrap and provisioning scripts (`bootstrap-dev-server.sh`, `hcloud-provision.sh`, `lib/logging.sh`)
- Nix - Declarative configuration management (`flake.nix`)

**Secondary:**
- Python 3.12 - Development runtime (via Nix)
- TypeScript/JavaScript - Node.js 22 tooling (via Nix)

## Runtime

**Environment:**
- Bash with `set -euo pipefail` - All shell scripts
- Python 3.12 - `pkgs.python312` in `flake.nix`
- Node.js 22 - `pkgs.nodejs_22` in `flake.nix` (pinned for MCP server compatibility)
- Bun - `pkgs.bun` in `flake.nix` (JavaScript runtime/bundler)

**Package Manager:**
- Nix Flakes - Primary package management via `flake.nix`
- uv - Python package manager (`pkgs.uv`)
- pnpm - Node.js package manager (`pkgs.pnpm`)
- npx - Used for GSD installation (`flake.nix` shellHook)
- Lockfile: `flake.lock` with pinned nixpkgs (nixos-unstable)

## Frameworks

**Core:**
- Nix Flakes - Declarative dev environment with multiple shells:
  - `devShells.default` - Full development environment
  - `devShells.minimal` - Claude Code + basics
  - `devShells.python` - Python-focused environment

**Testing:**
- BATS 1.x - Bash Automated Testing System (`pkgs.bats` in `flake.nix`)
- pytest - Python testing framework (`pkgs.python312Packages.pytest`)
- pytest-asyncio - Async test support (`pkgs.python312Packages.pytest-asyncio`)

**Build/Dev:**
- shellcheck - Shell script linting (`pkgs.shellcheck`)
- shfmt - Shell script formatting (`pkgs.shfmt`)
- nixfmt - Nix code formatter RFC style (`pkgs.nixfmt`)

## Key Dependencies

**Critical:**
- claude-code-nix - Claude Code AI assistant (`claude-code-nix.packages.${system}.claude-code`)
- mcp-servers-nix - MCP servers for Claude (`mcp-servers-nix.packages.${system}.context7-mcp`)
- github-mcp-server - GitHub integration for Claude (`pkgs.github-mcp-server`)

**Python Dev Stack:**
- ruff - Python linter/formatter (`pkgs.ruff`)
- black - Python formatter (`pkgs.black`)
- mypy - Static type checker (`pkgs.python312Packages.mypy`)
- httpx - Async HTTP client (`pkgs.python312Packages.httpx`)

**TypeScript/Node.js:**
- typescript - TypeScript compiler (`pkgs.nodePackages.typescript`)
- eslint - JavaScript linting (`pkgs.nodePackages.eslint`)
- prettier - Code formatter (`pkgs.nodePackages.prettier`)

**CLI Tools:**
- ripgrep - Fast grep (`pkgs.ripgrep`)
- fd - Modern find (`pkgs.fd`)
- bat - Syntax-highlighted cat (`pkgs.bat`)
- eza - Modern ls (`pkgs.eza`)
- fzf - Fuzzy finder (`pkgs.fzf`)
- lazygit - Git UI (`pkgs.lazygit`)
- gh - GitHub CLI (`pkgs.gh`)

**Containers:**
- podman - Container runtime (`pkgs.podman`)
- podman-compose - Container orchestration (`pkgs.podman-compose`)

**Database Clients:**
- sqlite - SQLite CLI (`pkgs.sqlite`)
- postgresql - PostgreSQL client (`pkgs.postgresql`)
- redis - Redis CLI (`pkgs.redis`)

## Configuration

**Environment:**
- Nix Flakes shellHook - Auto-configures environment on shell entry
- Environment variables with defaults in scripts:
  - `DEV_USER` - Default: current user
  - `SSH_PORT` - Default: 22
  - `MOSH_PORT_START/END` - Default: 60000-60010
  - `LOG_LEVEL` - Default: INFO

**Build:**
- `flake.nix` - Main Nix configuration
- `flake.lock` - Pinned dependency versions
- `~/.claude.json` - Claude Code MCP server config (generated by shellHook)
- `~/.zshrc` - Shell configuration (generated by shellHook)

## Platform Requirements

**Development:**
- Ubuntu 24.04 LTS - Target server OS
- Nix package manager - All tools managed via Nix
- No external Docker dependencies - uses Podman

**Production:**
- Hetzner Cloud VPS - Primary deployment target
- Dedicated SSH key (`~/.ssh/id_devserver`)
- UFW firewall with SSH/Mosh ports only

---

*Stack analysis: 2026-01-15*
*Update after major dependency changes*
